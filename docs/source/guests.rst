.. _guests:

*********************************************
Управление базой данных досье
*********************************************

FindFace Security позволяет создать досье на персону. Досье содержит одну или несколько фотографий персоны и классифицируется по принадлежности к тому или иному списку наблюдения, например, к черному или белому в самом простом случае. Вы можете создать несколько списков наблюдения, например, в зависимости от уровня опасности или, наоборот, статуса персоны. 

.. tip::
   Для автоматического создания большого количества досье используйте функционал пакетной загрузки фотографий.   

.. rubric:: В этой главе:

.. contents::
   :local:

Списки наблюдения
=============================

Создание списка
----------------------

Для создания списка наблюдения выполните следующие действия:

#. В веб-интерфейсе перейдите на вкладку :guilabel:`Списки наблюдения`.

    |create_list_ru|

     .. |create_list_ru| image:: /_static/create_list.png
        :scale: 60%

     .. |create_list_en| image:: /_static/create_list_en.png
        :scale: 60%


#. Нажмите на кнопку :guilabel:`Создать`.
#. В палитре :guilabel:`Метка` выберите цвет, который будет использоваться в событиях распознавания персон из данного списка. Правильно выбранный цвет повышает быстроту реагирования оператора на событие. 

    |list_ru|

     .. |list_ru| image:: /_static/list.png
        :scale: 80%

     .. |list_en| image:: /_static/list_en.png
        :scale: 80%


#. Введите название списка.
#. Поставьте флажок :guilabel:`Требовать подтверждение`, если для данного списка оператор должен в обязательном порядке подтвердить принятие события.
#. При необходимости включите звук при появлении события для данного списка.
#. Поставьте флажок :guilabel:`Активный`.
#. Нажмите на кнопку :guilabel:`Сохранить`.


Деактивация или удаление списка
----------------------------------------

Для того чтобы деактивировать или удалить список наблюдения из FindFace Security, выполните следующие действия:

#. Щелкните по имени списка в таблице.
#. Для деактивации снимите флажок :guilabel:`Активный`. Нажмите на кнопку :guilabel:`Сохранить`.
#. Для удаления нажмите на кнопку :guilabel:`Удалить`.

Просмотр досье из списка
-------------------------------------

Все созданные в FindFace Security досье отображаются на вкладке :guilabel:`Досье`. Используйте фильтр :guilabel:`Списки наблюдения`, чтобы отфильтровать досье по спискам.


.. _create-dossier:

Создание досье вручную
==================================

Для создания досье выполните следующие действия:

#. В веб-интерфейсе перейдите на вкладку :guilabel:`Досье`.

     |create_dossier_ru|
 
     .. |create_dossier_ru| image:: /_static/create_dossier.png
        :scale: 60%

     .. |create_dossier_en| image:: /_static/create_dossier_en.png
        :scale: 60%

#. Нажмите на кнопку :guilabel:`Создать`.
#. Добавьте одну или несколько фотографий и введите имя человека. При необходимости добавьте комментарий.

   .. important::
      Лицо на фотографии должно быть надлежащего качества, т. е. в близком к анфас положении. При несоответствии фотографии данному требованию будет выведено сообщение с описанием ошибки.

   |dossier_ru|

   .. |dossier_ru| image:: /_static/dossier.png
      :scale: 80%

   .. |dossier_en| image:: /_static/dossier_en.png
      :scale: 80%

#. Из раскрывающегося списка :guilabel:`Списки наблюдения` выберите список (или несколько списков, по очереди), в который следует добавить досье.
#. Убедитесь, что поставлен флажок :guilabel:`Активное`. Если досье неактивно, оно не будет использоваться для :ref:`идентификации лица <events>` в режиме реального времени.
#. Нажмите на кнопку :guilabel:`Сохранить`.

.. _batch-upload:

Пакетная загрузка фотографий
====================================

Для автоматического создания большого количества досье используйте функционал пакетной загрузки фотографий. Выполните следующие действия:

#. В веб-интерфейсе перейдите на вкладку :guilabel:`Пакетная загрузка`.

     |batch_upload_ru|

     .. |batch_upload_ru| image:: /_static/batch_upload.png

     .. |batch_upload_en| image:: /_static/batch_upload_en.png


#. Выберите фотографии для загрузки пофайлово или укажите папку с фотографиями. 
#. Имена файлов с фотографиями можно использовать как основу для имен и/или комментариев в создаваемых досье. Выберите нужный вариант(ы). Затем настройте правило формирования имени и/или комментария, добавив пользовательский префикс и/или постфикс к имени файла. 

   .. tip::
      Во избежание слияние 3-х слов в одно, используйте символ подчеркивания или пробел в префиксе и постфиксе. 

#. Из раскрывающегося списка :guilabel:`Списки наблюдения` выберите список (или несколько списков, по очереди), в который следует добавить создаваемые досье.
#. В параметре :guilabel:`Параллельная загрузка` задайте количество потоков загрузки фотографий. Чем больше потоков, тем быстрее будет завершена загрузка, однако также потребуется и большее количество ресурсов. 
#. Из раскрывающегося списка :guilabel:`MF selector` выберите, как должна поступить система при наличии нескольких лиц на фотографии: отклонить фотографию или загрузить самое большое лицо.
#. Для запуска пакетного создания досье нажмите на кнопку :guilabel:`Старт`.

.. important::
   Для просмотра лога пакетной загрузки нажмите на кнопку :guilabel:`Лог`. Затем при необходимости можно скачать лог в формате ``.csv``.

     |batch_upload_log_ru|

     .. |batch_upload_log_ru| image:: /_static/batch_upload_log.png
        :scale: 80%

     .. |batch_upload_log_en| image:: /_static/batch_upload_log_en.png
        :scale: 80%

